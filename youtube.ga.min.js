/*!
 * youtube.ga.js | v0.3
 * Copyright (c) 2012 - 2013 Sander Heilbron (http://sanderheilbron.nl)
 * Edits by Ali Karbassi (http://karbassi.com)
 * MIT licensed
 */
function onYouTubePlayerAPIReady(){if("[object Array]"===Object.prototype.toString.call(configYouTubePlayer)){YT_GA=[];for(var a in configYouTubePlayer)YT_GA.push(new youtube_ga(configYouTubePlayer[a]))}"[object Object]"===Object.prototype.toString.call(configYouTubePlayer)&&(YT_GA=new youtube_ga(configYouTubePlayer))}var tag=document.createElement("script");tag.src="//youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var YT_GA=YT_GA||{},youtube_ga=function(a){this.configYouTubePlayer=a;var b={height:a.height,width:a.width,videoId:a.videoID,playerVars:{},events:{onReady:this.bind(this.onPlayerReady),onStateChange:this.bind(this.onPlayerStateChange),onPlaybackQualityChange:this.bind(this.onPlayerPlaybackQualityChange)}};for(var c in a.playerVars)a.playerVars.hasOwnProperty(c)&&(b.playerVars[c]=a.playerVars[c]);this.player=new YT.Player(a.element||"ytplayer",b)};youtube_ga.prototype.bind=function(a){var b=this;return function(){a.apply(b,arguments)}},youtube_ga.prototype.onPlayerReady=function(){setInterval(this.bind(this.onPlayerProgressChange),500),this.progress25=!1,this.progress50=!1,this.progress75=!1,this.url=this.player.getVideoUrl(),this.videoPlayed=!1,this.videoCompleted=!1},youtube_ga.prototype.onPlayerProgressChange=function(){if(configYouTubePlayer.trackProgress&&"undefined"!=typeof _gaq){this.timePercentComplete=Math.round(100*(this.player.getCurrentTime()/this.player.getDuration()));var a;this.timePercentComplete>24&&!this.progress25&&(a="25%",this.progress25=!0),this.timePercentComplete>49&&!this.progress50&&(a="50%",this.progress50=!0),this.timePercentComplete>74&&!this.progress75&&(a="75%",this.progress75=!0),a&&_gaq.push(["_trackEvent","YouTube","Played video: "+a,this.url,,!0])}},youtube_ga.prototype.onPlayerPlaybackQualityChange=function(a){if(this.configYouTubePlayer.trackPlaybackQuality&&"undefined"!=typeof _gaq){var b;switch(a.data){case"hd1080":b="1080p HD";break;case"hd720":b="720p HD";break;case"large":b="480p";break;case"medium":b="360p";break;case"small":b="240p"}b&&_gaq.push(["_trackEvent","YouTube","Video quality: "+b,this.url,,!0])}},youtube_ga.prototype.onPlayerStateChange=function(a){"undefined"!=typeof _gaq&&(this.timePercentComplete=Math.round(100*(this.player.getCurrentTime()/this.player.getDuration())),a.data!==YT.PlayerState.PLAYING||this.videoPlayed?a.data===YT.PlayerState.PAUSED&&92>this.timePercentComplete&&!this.videoPaused?(_gaq.push(["_trackEvent","YouTube","Paused video",this.url,,!0]),this.videoPaused=!0):a.data!==YT.PlayerState.ENDED||this.videoCompleted||(_gaq.push(["_trackEvent","YouTube","Completed video",this.url,,!0]),this.videoCompleted=!0,console.log("function"==typeof this.configYouTubePlayer.videoEnd),"function"==typeof this.configYouTubePlayer.videoEnd&&this.configYouTubePlayer.videoEnd()):(_gaq.push(["_trackEvent","YouTube","Started video",YT_GA.url,,!0]),this.videoPaused=!1,this.videoPlayed=!0))};